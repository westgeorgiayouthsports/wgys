import{l as E,j as t}from"./index-lWfxYzVq.js";import{g as K,r as Y}from"./vendor-router-Ck4ZuSP9.js";import{a8 as o,x as V,H as k,S as R,d as O,a9 as z,az as W,aA as N,a2 as q,aB as J,a0 as Q}from"./vendor-antd-CieyQibU.js";import{s as X}from"./firebaseSports-DK6SYh6x.js";import{g as v,D as A}from"./season-wVjdxr9p.js";import"./vendor-react-Ck9bq5u-.js";import"./vendor-redux-BbD-gcRX.js";import"./vendor-firebase-BzUsRx-X.js";import"./slugify-IzZIKjBC.js";function F(p){if(!p)return null;const n=(p||"").trim();if(!n)return null;let h=o(n);if(h.isValid()||(h=o(n.replace(/-/g,"/")),h.isValid())||(h=o(n.replace(/\./g,"/")),h.isValid()))return h;const f=n.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(f){const b=parseInt(f[1],10),T=parseInt(f[2],10),x=parseInt(f[3],10);return o().year(b).month(T-1).date(x).hour(0).minute(0).second(0).millisecond(0)}return null}function w(p){if(!p)return o();const n=new Date(p);return o().year(n.getUTCFullYear()).month(n.getUTCMonth()).date(n.getUTCDate()).hour(0).minute(0).second(0).millisecond(0)}const{Title:Z,Text:C,Paragraph:j}=V;function ge({compact:p=!1}){const[n]=K(),[h,f]=Y.useState(()=>n.get("sex")==="female"?"softball":"baseball"),[b,T]=Y.useState([]),[x,M]=Y.useState(()=>{const e=o(),a=e.month()>=7,r=n.get("sex")==="female"?"softball":"baseball";try{const d=a?"fall":"spring",i=v({term:d,year:e.year()},r),c=w(i),m=e.isAfter(o().year(e.year()).month(c.month()).date(c.date()))?e.year()+1:e.year(),y=v({term:d,year:m},r);return w(y)}catch(d){E.error("Error computing control date from registration util",d);const i=r.toLowerCase(),c=A[i]??A.default,m=o().year(e.year()).month(c.month).date(c.day),y=e.isAfter(m)?e.year()+1:e.year();return o().year(y).month(c.month).date(c.day)}}),[D,B]=Y.useState(()=>{const e=n.get("dateOfBirth");return e?o(e):null}),U=e=>{const a=o(),l=a.month()>=7;try{const r=l?"fall":"spring",d=(b||[]).find(I=>I.id===e||(I.name||"").toLowerCase()===(e||"").toLowerCase()),i=v({term:r,year:a.year()},d??e),c=w(i),m=a.isAfter(o().year(a.year()).month(c.month()).date(c.date()))?a.year()+1:a.year(),y=v({term:r,year:m},d??e);M(w(y));return}catch(r){E.error("Error computing age control date from registration util",r);const d=(e||"").toLowerCase().replace(/\s+/g,"_"),i=A[d]??A.default,c=o().year(a.year()).month(i.month).date(i.day),m=a.isAfter(c)?a.year()+1:a.year();M(o().year(m).month(i.month).date(i.day))}};Y.useEffect(()=>{(async()=>{try{const e=await X.getSports(),a=(e||[]).slice().sort((i,c)=>{const m=(i?.name||"").toLowerCase(),y=(c?.name||"").toLowerCase();return m<y?-1:m>y?1:0});T(a);const r=n.get("sex")==="female"?"softball":"baseball",d=(e||[]).find(i=>(i.name||"").toLowerCase().includes(r));d&&f(d.id||d.name||r)}catch(e){E.error("Error loading sports",e)}})()},[]);const s=!!p,S=o(),_=o().year(S.year()).month(x.month()).date(x.date()),G=S.isAfter(_)?S.year()+1:S.year(),u=x.clone().year(G),P=e=>{let a=u.year()-e.year();return(u.month()<e.month()||u.month()===e.month()&&u.date()<=e.date())&&a--,a},L=(()=>{const e=[];for(let a=3;a<=18;a++){const l=u.clone().subtract(a+1,"year"),r=u.clone().subtract(a,"year").subtract(1,"day");e.push({ageGroup:`${a}U`,age:a,fromDate:l.format("YYYY-MM-DD"),toDate:r.format("YYYY-MM-DD"),fromDateDisplay:l.locale("en").format("MMM D, YYYY"),toDateDisplay:r.locale("en").format("MMM D, YYYY"),gradYear:u.year()+18-a})}return e})(),g=(()=>{if(!D)return null;const e=D.format("YYYY-MM-DD");return L.find(a=>e>=a.fromDate&&e<=a.toDate)})(),$=D?P(D):null,H=[{title:"Division",dataIndex:"ageGroup",key:"ageGroup",render:(e,a)=>t.jsx(Q,{color:g?.ageGroup===e?"green":"default",children:e})},{title:"Season Age",dataIndex:"age",key:"age"},{title:"Grade Exemption",key:"gradeExemption",render:(e,a)=>{const r=a.age-6;return r<0?"":r===0?"K":r}},{title:"Graduation Year",key:"gradYear",render:(e,a)=>a.age-6<0?"":a.gradYear},{title:"Born on/after",dataIndex:"fromDateDisplay",key:"fromDateDisplay"},{title:"Born on/before",dataIndex:"toDateDisplay",key:"toDateDisplay"}];return t.jsxs("div",{className:s?"page-container compact-help":"page-container",children:[t.jsx(Z,{level:s?4:2,children:"Registration Help"}),t.jsx(j,{children:"Use this tool to understand which age group your athlete belongs to based on their birth date, sex, and grade level. Age divisions are determined by the athlete's age on the season control date."}),t.jsx(k,{title:"Age Group Calculator",style:{marginBottom:s?"12px":"24px"},styles:{body:s?{padding:8}:void 0},children:t.jsxs(R,{orientation:"vertical",size:s?"small":"large",style:{width:"100%"},children:[t.jsxs(R,{size:s?"small":"large",wrap:!0,children:[t.jsxs("div",{children:[t.jsx(C,{strong:!0,children:"Sport:"}),t.jsx("br",{}),t.jsx(O,{value:h??void 0,onChange:e=>{f(e),U(e)},size:s?"small":void 0,style:{width:200},placeholder:"Select sport",children:b.map(e=>t.jsx(O.Option,{value:e.id||e.name,children:e.name},e.id||e.name))})]}),t.jsxs("div",{children:[t.jsx(C,{strong:!0,children:"Season Control Date:"}),t.jsx("br",{}),t.jsx(z,{value:x,allowClear:!1,size:s?"small":void 0,onChange:(e,a)=>{if(e)return M(e);const l=F(a);l&&M(l)},format:["MMMM D, YYYY","MM/DD/YYYY","YYYY-MM-DD"]})]}),t.jsxs("div",{children:[t.jsx(C,{strong:!0,children:"Athlete's Birth Date:"}),t.jsx("br",{}),t.jsx(z,{value:D,allowClear:!1,size:s?"small":void 0,onChange:(e,a)=>{if(e)return B(e);const l=F(a);l&&B(l)},format:["MMMM D, YYYY","MM/DD/YYYY","YYYY-MM-DD"],placeholder:"Select birth date"})]})]}),D&&t.jsx(W,{title:g?s?t.jsxs("div",{children:[t.jsx("strong",{children:g.ageGroup})," — ",g.fromDateDisplay," to ",g.toDateDisplay]}):t.jsxs("div",{children:[t.jsxs("strong",{children:["Eligible Age Group: ",g.ageGroup]}),t.jsx("br",{}),"Season Age: ",$," years old",t.jsx("br",{}),"Birth Date Range: ",g.fromDateDisplay," to ",g.toDateDisplay,t.jsx("br",{}),t.jsx("strong",{children:"Grade Exemption (if applicable):"})," ",g.age-6,"th grade or graduation year ",u.year()+18-g.age]}):t.jsxs("div",{children:[t.jsx("strong",{children:"No eligible age group found"}),t.jsx("br",{}),"The selected birth date doesn't fall within any standard age division."]}),type:g?"success":"warning",icon:t.jsx(N,{})})]})}),t.jsxs(k,{title:t.jsxs("span",{children:[" ",t.jsx("span",{style:{marginRight:8},children:"Age Divisions (school year):"}),t.jsx("span",{style:{fontWeight:600},children:`${G-1}-${G}`})]}),style:s?{padding:8}:void 0,children:[t.jsx(j,{children:t.jsxs(C,{type:"secondary",children:['Athletes must be born between the "Born on/after" and "Born on/before" dates to be eligible for each age division. Age is calculated as of the season control date (',x.locale("en").format("MMMM D, YYYY"),")."]})}),t.jsx("div",{style:{display:"block",width:"100%",padding:0},children:t.jsx(q,{columns:H,dataSource:L,rowKey:"ageGroup",pagination:!1,size:"small",tableLayout:"auto",style:{width:"auto",whiteSpace:"nowrap",minWidth:"max-content"},scroll:{x:"max-content"}})})]}),t.jsx(k,{title:"Important Notes",style:{marginTop:s?"8px":"24px"},styles:{body:s?{padding:8}:void 0},children:t.jsx(J,{defaultActiveKey:s?[]:["1"],ghost:!0,items:[{key:"1",label:"Sex Restrictions",children:t.jsx(j,{children:"Some programs may have sex restrictions: Co-ed / Male Only / Female Only (e.g., softball)."})},{key:"2",label:"Grade Eligibility",children:t.jsx(j,{children:"Some programs may also have grade exemptions in addition to age restrictions. Contact the program administrator for exemptions."})},{key:"3",label:"Season Control Date",children:t.jsx(j,{children:`The season control date is used to determine an athlete's "season age" — the age as of this specific date. The age control date for baseball is typically May 1st.`})}]})})]})}export{ge as default};
