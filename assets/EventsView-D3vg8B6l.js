import{G as m,j as e,H as h}from"./index-lWfxYzVq.js";import{r as u}from"./vendor-router-Ck4ZuSP9.js";import{u as D,a as S}from"./vendor-redux-BbD-gcRX.js";import"./vendor-react-Ck9bq5u-.js";import"./vendor-antd-CieyQibU.js";import"./vendor-firebase-BzUsRx-X.js";const G=({teamId:l,isAdmin:x=!1})=>{const n=D(),{events:b,loading:f,error:g}=S(t=>t.events),[p,i]=u.useState(!1),[o,c]=u.useState(null),[s,d]=u.useState({title:"",type:"practice",date:"",location:"",description:""});u.useEffect(()=>{l&&n(m(l))},[l,n]);const r=t=>{const{name:a,value:E}=t.target;d(C=>({...C,[a]:E}))},y=async t=>{if(t.preventDefault(),!l){alert("Team ID is required");return}try{o?await h.updateEvent(o.id,{...s}):await h.createEvent(l,s.title,s.type,s.date,s.location,s.description),d({title:"",type:"practice",date:"",location:"",description:""}),c(null),i(!1),l&&n(m(l))}catch(a){console.error("âŒ Error saving event:",a),alert("Failed to save event")}},v=t=>{c(t),d({title:t.title,type:t.type,date:t.date,location:t.location,description:t.description}),i(!0)},j=async t=>{if(confirm("Are you sure you want to delete this event?"))try{await h.deleteEvent(t),l&&n(m(l))}catch(a){console.error("âŒ Error deleting event:",a),alert("Failed to delete event")}},N=t=>new Date(t).toLocaleString(),w=t=>{switch(t){case"practice":return"bg-blue-500/20 text-blue-300";case"game":return"bg-green-500/20 text-green-300";case"tournament":return"bg-purple-500/20 text-purple-300";default:return"bg-gray-500/20 text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Schedule & Events"}),x&&e.jsx("button",{onClick:()=>{i(!p),c(null),d({title:"",type:"practice",date:"",location:"",description:""})},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:p?"Cancel":"+ Add Event"})]}),g&&e.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500 text-red-300 rounded-lg",children:g}),x&&p&&e.jsxs("div",{className:"p-6 bg-slate-800 rounded-lg border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:o?"Edit Event":"Create New Event"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Title"}),e.jsx("input",{type:"text",name:"title",value:s.title,onChange:r,placeholder:"e.g., Spring Practice",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Type"}),e.jsxs("select",{name:"type",value:s.type,onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"practice",children:"Practice"}),e.jsx("option",{value:"game",children:"Game"}),e.jsx("option",{value:"tournament",children:"Tournament"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date & Time"}),e.jsx("input",{type:"datetime-local",name:"date",value:s.date,onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:r,placeholder:"e.g., Field A",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:r,placeholder:"Add any additional details...",rows:3,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:o?"Update Event":"Create Event"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),c(null)},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition",children:"Cancel"})]})]})]}),f?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading events..."}):b.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No events scheduled yet"}):e.jsx("div",{className:"grid gap-4",children:b.map(t=>e.jsxs("div",{className:"p-6 bg-slate-800 border border-slate-700 rounded-lg hover:border-slate-600 transition",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:t.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${w(t.type)}`,children:t.type})]}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{children:["ðŸ“… ",N(t.date)]}),e.jsxs("p",{children:["ðŸ“ ",t.location]})]})]}),x&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{v(t)},className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition",children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"px-3 py-1 text-sm bg-red-600 hover:bg-red-700 text-white rounded transition",children:"Delete"})]})]}),t.description&&e.jsx("p",{className:"text-gray-300 text-sm mt-3",children:t.description})]},t.id))})]})};export{G as EventsView,G as default};
