import{o as i,n as l,q as p,z as h,t as u}from"./vendor-firebase-BzUsRx-X.js";import{e as c,l as y}from"./index-lWfxYzVq.js";const g={async getTeamRoster(a){try{const o=i(c,`rosters/${a}`),r=await l(o);if(!r.exists())return[];const t=[];return r.forEach(e=>{const s={id:e.key,...e.val()};t.push(s)}),t.sort((e,s)=>e.number-s.number)}catch(o){throw y.error("❌ Error fetching team roster:",o),o}},async addPlayer(a,o,r,t,e){try{const s=i(c,`rosters/${a}`),n=u(s),f={name:o,number:r,position:t,registrationId:e,joinedAt:new Date().toISOString()};return await p(n,f),{id:n.key,...f}}catch(s){throw y.error("❌ Error adding player to roster:",s),s}},async updatePlayer(a,o,r){try{const t=i(c,`rosters/${a}/${o}`),e=await l(t);e.exists()&&await p(t,{...e.val(),...r})}catch(t){throw y.error("❌ Error updating player:",t),t}},async removePlayer(a,o){try{const r=i(c,`rosters/${a}/${o}`);await h(r)}catch(r){throw y.error("❌ Error removing player from roster:",r),r}},async getPlayerByNumber(a,o){try{const r=i(c,`rosters/${a}`),t=await l(r);if(!t.exists())return null;let e=null;return t.forEach(s=>{const n={id:s.key,...s.val()};n.number===o&&(e=n)}),e}catch(r){throw y.error("❌ Error fetching player by number:",r),r}},async getPlayersByPosition(a,o){try{const r=i(c,`rosters/${a}`),t=await l(r);if(!t.exists())return[];const e=[];return t.forEach(s=>{const n={id:s.key,...s.val()};n.position===o&&e.push(n)}),e.sort((s,n)=>s.number-n.number)}catch(r){throw y.error("❌ Error fetching players by position:",r),r}},async linkRegistrationToPlayer(a,o,r){try{const t=i(c,`rosters/${a}/${o}`),e=await l(t);e.exists()&&await p(t,{...e.val(),registrationId:r})}catch(t){throw y.error("❌ Error linking registration to player:",t),t}}};export{g as r};
