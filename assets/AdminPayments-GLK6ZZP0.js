import{j as e,r as C}from"./index-lWfxYzVq.js";import{u as z,r as p}from"./vendor-router-Ck4ZuSP9.js";import{a as $}from"./vendor-redux-BbD-gcRX.js";import{p as A}from"./firebasePrograms-DQfL_YhU.js";import{S as B,B as D,ax as I,x as N,V as w,W as y,X as r,H as o,$ as c,ac as M,a2 as x,a0 as E}from"./vendor-antd-CieyQibU.js";import"./vendor-react-Ck9bq5u-.js";import"./vendor-firebase-BzUsRx-X.js";import"./slugify-IzZIKjBC.js";const{Title:F,Text:n}=N;function J(){const u=z(),s=$(t=>t.theme.isDarkMode),[f,h]=p.useState([]),[j,v]=p.useState([]),[k,m]=p.useState(!0);p.useEffect(()=>{(async()=>{try{m(!0);const[a,R]=await Promise.all([C.getAllRegistrations(),A.getPrograms()]);h(a),v(R)}catch(a){console.error("Failed to load payment data:",a)}finally{m(!1)}})()},[]);const g=[{title:"Player Name",dataIndex:"playerName",key:"playerName"},{title:"Parent",dataIndex:"parentName",key:"parentName"},{title:"Amount",dataIndex:"fee",key:"fee",render:t=>`$${t.toFixed(2)}`,align:"right"},{title:"Status",dataIndex:"status",key:"status",render:t=>{const a=t==="paid"?"green":t==="approved"?"blue":"orange";return e.jsx(E,{color:a,children:t.toUpperCase()})}},{title:"Method",dataIndex:"paymentMethod",key:"paymentMethod"}],i=f.filter(t=>t.status==="paid"),l=f.filter(t=>t.status==="approved"),d=f.filter(t=>t.status==="pending"),b=i.reduce((t,a)=>t+a.fee,0),S=l.reduce((t,a)=>t+a.fee,0),P=d.reduce((t,a)=>t+a.fee,0),T=j.reduce((t,a)=>t+(a.totalPayments||0),0);return e.jsxs("div",{style:{padding:"32px",backgroundColor:s?"#141414":"#fafafa",color:s?"#ffffff":"rgba(0, 0, 0, 0.85)",minHeight:"100vh"},children:[e.jsx(B,{style:{marginBottom:"32px"},children:e.jsx(D,{type:"text",icon:e.jsx(I,{}),onClick:()=>u("/admin/dashboard"),children:"Back to Dashboard"})}),e.jsx(F,{level:2,style:{margin:0,marginBottom:"8px"},children:"Payments & Revenue"}),e.jsx(n,{type:"secondary",style:{marginBottom:"32px",display:"block"},children:"Track registrations fees and payment status"}),e.jsxs(w,{spinning:k,children:[e.jsxs(y,{gutter:[24,24],style:{marginBottom:"32px"},children:[e.jsx(r,{xs:24,sm:12,lg:6,children:e.jsxs(o,{hoverable:!0,style:{backgroundColor:s?"#1f1f1f":"#ffffff"},children:[e.jsx(c,{title:"Total Collected",value:b,prefix:"$",precision:2,styles:{content:{color:"#52c41a"}}}),e.jsxs(n,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:[i.length," paid registrations"]})]})}),e.jsx(r,{xs:24,sm:12,lg:6,children:e.jsxs(o,{hoverable:!0,style:{backgroundColor:s?"#1f1f1f":"#ffffff"},children:[e.jsx(c,{title:"Approved (Pending)",value:S,prefix:"$",precision:2,styles:{content:{color:"#1890ff"}}}),e.jsxs(n,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:[l.length," awaiting payment"]})]})}),e.jsx(r,{xs:24,sm:12,lg:6,children:e.jsxs(o,{hoverable:!0,style:{backgroundColor:s?"#1f1f1f":"#ffffff"},children:[e.jsx(c,{title:"Pending Review",value:P,prefix:"$",precision:2,styles:{content:{color:"#faad14"}}}),e.jsxs(n,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:[d.length," pending approval"]})]})}),e.jsx(r,{xs:24,sm:12,lg:6,children:e.jsxs(o,{hoverable:!0,style:{backgroundColor:s?"#1f1f1f":"#ffffff"},children:[e.jsx(c,{title:"Total Revenue (All Time)",value:T,prefix:"$",precision:2,styles:{content:{color:"#1890ff"}}}),e.jsx(n,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Across all programs"})]})})]}),e.jsx(y,{gutter:[24,24],children:e.jsx(r,{xs:24,children:e.jsx(o,{title:"Payments by Status",hoverable:!0,style:{backgroundColor:s?"#1f1f1f":"#ffffff"},children:e.jsx(M,{items:[{key:"paid",label:`Paid (${i.length})`,children:e.jsx(x,{columns:g,dataSource:i.map((t,a)=>({...t,key:t.id||a})),pagination:{pageSize:15},size:"small"})},{key:"approved",label:`Approved (${l.length})`,children:e.jsx(x,{columns:g,dataSource:l.map((t,a)=>({...t,key:t.id||a})),pagination:{pageSize:15},size:"small"})},{key:"pending",label:`Pending (${d.length})`,children:e.jsx(x,{columns:g,dataSource:d.map((t,a)=>({...t,key:t.id||a})),pagination:{pageSize:15},size:"small"})}]})})})})]})]})}export{J as default};
