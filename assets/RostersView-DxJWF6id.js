import{j as e}from"./index-lWfxYzVq.js";import{r as n}from"./vendor-router-Ck4ZuSP9.js";import{r as c}from"./firebaseRosters-BGWxAYEL.js";import"./vendor-react-Ck9bq5u-.js";import"./vendor-antd-CieyQibU.js";import"./vendor-redux-BbD-gcRX.js";import"./vendor-firebase-BzUsRx-X.js";const q=({teamId:s,isAdmin:d=!1})=>{const[h,g]=n.useState([]),[f,p]=n.useState(!0),[u,a]=n.useState(!1),[m,o]=n.useState(null),[r,i]=n.useState({name:"",number:"",position:""});n.useEffect(()=>{s&&x()},[s]);const x=async()=>{if(s){p(!0);try{const t=await c.getTeamRoster(s);g(t)}catch(t){console.error("❌ Error loading roster:",t)}finally{p(!1)}}},b=t=>{const{name:l,value:w}=t.target;i(P=>({...P,[l]:w}))},y=async t=>{if(t.preventDefault(),!s||!r.name||!r.number||!r.position){alert("Please fill in all fields");return}try{m?await c.updatePlayer(s,m.id,{name:r.name,number:parseInt(r.number),position:r.position}):await c.addPlayer(s,r.name,parseInt(r.number),r.position||""),i({name:"",number:"",position:""}),o(null),a(!1),await x()}catch(l){console.error("❌ Error saving player:",l),alert("Failed to save player")}},j=t=>{o(t),i({name:t.name,number:t.number.toString(),position:t.position}),a(!0)},v=async t=>{if(confirm("Are you sure you want to remove this player?"))try{s&&(await c.removePlayer(s,t),await x())}catch(l){console.error("❌ Error deleting player:",l),alert("Failed to remove player")}},N=["Pitcher","Catcher","Infielder","Outfielder","Other"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Team Roster"}),d&&e.jsx("button",{onClick:()=>{a(!u),o(null),i({name:"",number:"",position:""})},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:u?"Cancel":"+ Add Player"})]}),d&&u&&e.jsx("div",{className:"p-6 bg-slate-800 rounded-lg border border-slate-700",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Player Name"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:b,placeholder:"e.g., John Doe",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Jersey Number"}),e.jsx("input",{type:"number",name:"number",value:r.number,onChange:b,placeholder:"e.g., 23",min:"1",max:"99",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Position"}),e.jsxs("select",{name:"position",value:r.position,onChange:b,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:border-blue-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select position"}),N.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:m?"Update Player":"Add Player"}),e.jsx("button",{type:"button",onClick:()=>{a(!1),o(null)},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition",children:"Cancel"})]})]})}),f?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading roster..."}):h.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No players on roster yet"}):e.jsx("div",{className:"grid gap-4",children:h.map(t=>e.jsxs("div",{className:"p-4 bg-slate-800 border border-slate-700 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:["#",t.number]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.position})]})]}),d&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{j(t)},className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition",children:"Edit"}),e.jsx("button",{onClick:()=>v(t.id),className:"px-3 py-1 text-sm bg-red-600 hover:bg-red-700 text-white rounded transition",children:"Remove"})]})]},t.id))})]})};export{q as RostersView,q as default};
